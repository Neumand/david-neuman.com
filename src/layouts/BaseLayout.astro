---
import { SEO } from 'astro-seo';
import DefaultSEO from '../../seo.config';
import Navigation from '@components/Navigation/Navigation.astro';
import SocialIcon from '@components/Social/SocialIcon.astro';
import Twitter from '@components/Social/Twitter.astro';
import LinkedIn from '@components/Social/LinkedIn.astro';
import GitHub from '@components/Social/GitHub.astro';
import HackerNews from '@components/Social/HackerNews.astro';
import Mail from '@components/Social/Mail.astro';

import '../styles/globals.css';
import '@fontsource/inter';
import '@fontsource/poppins';

export interface Props {
  title?: string;
  description?: string;
}

const { title = DefaultSEO.title, description = DefaultSEO.description } =
  Astro.props as Props;
---

<head>
  <script is:inline>
    function toggleTheme(theme) {
      const themeIconPath = document.querySelector('#theme-icon-path');

      if (theme === 'light') {
        localStorage.setItem('theme', 'light');
        document.documentElement.classList.remove('dark');
        themeIconPath?.setAttribute(
          'd',
          'M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z',
        );
      } else {
        localStorage.setItem('theme', 'dark');
        document.documentElement.classList.add('dark');
        themeIconPath?.setAttribute(
          'd',
          'M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z',
        );
      }
    }

    const theme = localStorage.theme;
    if (theme) {
      toggleTheme(theme);
    } else {
      const prefersDark = window.matchMedia(
        '(prefers-color-scheme: dark)',
      ).matches;
      toggleTheme(prefersDark ? 'dark' : 'light');
    }
  </script>
  <meta charset='UTF-8' /><meta name='viewport' content='width=device-width'
  /><link rel='icon' type='image/x-icon' href='/favicon.ico' /><meta
    name='generator'
    content={Astro.generator}
  />
</head>

<SEO title={title} description={description} />

<div
  class='flex flex-col min-h-screen bg-white transition-all transform ease-linear dark:bg-gray-900 dark:text-gray-100'
>
  <Navigation />

  <slot />
  <footer
    class='flex flex-col-reverse flex-grow items-center p-8 md:flex-row md:justify-between md:items-end'
  >
    <span class='text-sm md:text-base'
      >{`David Neuman Â© ${new Date().getFullYear()}`}
    </span>
    <div class='flex justify-center space-x-2'>
      <SocialIcon url='https://github.com/Neumand'>
        <GitHub />
      </SocialIcon>
      <SocialIcon url='https://twitter.com/DavidMNeuman'>
        <Twitter />
      </SocialIcon>
      <SocialIcon url='https://linkedin.com/in/Neumand'>
        <LinkedIn />
      </SocialIcon>
      <SocialIcon url='https://news.ycombinator.com/user?id=dneuman'>
        <HackerNews />
      </SocialIcon>
      <SocialIcon url='mailto:david.m.neuman@gmail.com'>
        <Mail />
      </SocialIcon>
    </div>
  </footer>
</div>
