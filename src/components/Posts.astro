---
import { Image } from '@astrojs/image/components';
import { formatDate } from '@util/formatter';
import Tags from '@components/Tags.astro';
import ReadingTime from './ReadingTime.astro';
import type { CollectionEntry } from 'astro:content';

interface Props {
  posts: CollectionEntry<'blog'>[];
}

const { posts } = Astro.props as Props;
---

<div
  class='px-5 max-w-4xl mx-auto sm:grid sm:grid-cols-2 xl:grid-cols-3 md:gap-8 xl:gap-10 xl:max-w-6xl'
>
  {
    posts.map(({ data, body, slug }) => (
      <div class='mx-auto w-full overflow-hidden rounded-lg m-8 transition-transform transform ease-in-out xl:max-h-xl md:hover:shadow-blue md:hover:scale-105 dark:hover:bg-gray-800 md:dark:hover:shadow-none'>
        <a href={`/blog/${slug}`}>
          <Image
            class='cursor-pointer w-full'
            format={'webp'}
            src={data.featureImage}
            width={1920}
            height={1080}
            alt='Featured image'
          />

          <div class='px-6 py-3 space-y-2'>
            <h3 class='text-lg font-semibold md:text-2xl'>{data.title}</h3>
            <div class='flex space-x-2 items-center'>
              <div class='text-sm text-gray-700 dark:text-gray-400'>
                {formatDate(data.datePublished)}
              </div>
              <ReadingTime html={body} />
            </div>
            <div>{data.excerpt}</div>
          </div>
        </a>
        <div class='px-6 py-3'>
          <Tags tags={data.tags} />
        </div>
      </div>
    ))
  }
</div>
